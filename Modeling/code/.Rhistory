# tidy version
cell_onset_cutoffs = quantile(cell_tidy$onset, c(0,1/3,2/3,1), na.rm = TRUE)
cell_onset_cutoffs[1] = cell_onset_cutoffs[1]-1
cell_lat_cutoffs = quantile(cell_tidy$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
cell_lat_cutoffs[1] = cell_lat_cutoffs[1]-1
cell_delay_cutoffs = quantile(cell_tidy$delay_median, c(0,1/3,2/3,1), na.rm = TRUE)
cell_delay_cutoffs[1] = cell_delay_cutoffs[1]-1
cell_tidy <- cell_tidy %>% mutate(onset_category=cut(onset, breaks = cell_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = cell_lat_cutoffs,
labels=c("south","central","north"))) %>%
mutate(delay_category=cut(delay_median, breaks = cell_delay_cutoffs,
labels=c("short_delay","middle_delay","long_delay")))
# untidy version (to compare SC and DC easily)
cell_onset_cutoffs = quantile(median_cell$onset, c(0,1/3,2/3,1), na.rm = TRUE)
cell_onset_cutoffs[1] = cell_onset_cutoffs[1]-1
cell_lat_cutoffs = quantile(median_cell$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
cell_lat_cutoffs[1] = cell_lat_cutoffs[1]-1
median_cell <- median_cell %>% mutate(onset_category=cut(onset, breaks = cell_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = cell_lat_cutoffs,
labels=c("south","central","north")))
# Muni SCALE ------------------------------------------------------------------------------------------------
muni_onset_cutoffs = quantile(muni_tidy$onset, c(0,1/3,2/3,1), na.rm = TRUE)
muni_onset_cutoffs[1] = muni_onset_cutoffs[1]-1
muni_lat_cutoffs = quantile(muni_tidy$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
muni_lat_cutoffs[1] = muni_lat_cutoffs[1]-1
muni_delay_cutoffs = quantile(muni_tidy$delay_median, c(0,1/3,2/3,1), na.rm = TRUE)
muni_delay_cutoffs[1] = muni_delay_cutoffs[1]-1
muni_tidy <- muni_tidy %>% mutate(onset_category=cut(onset, breaks = muni_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = muni_lat_cutoffs,
labels=c("south","central","north"))) %>%
mutate(delay_category=cut(delay_median, breaks = muni_delay_cutoffs,
labels=c("short_delay","middle_delay","long_delay")))
# untidy version (to compare SC and DC easily)
muni_onset_cutoffs = quantile(median_muni$onset, c(0,1/3,2/3,1), na.rm = TRUE)
muni_onset_cutoffs[1] = muni_onset_cutoffs[1]-1
muni_lat_cutoffs = quantile(median_muni$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
muni_lat_cutoffs[1] = muni_lat_cutoffs[1]-1
median_muni <- median_muni %>% mutate(onset_category=cut(onset, breaks = muni_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = muni_lat_cutoffs,
labels=c("south","central","north")))
# CARpoly SCALE ------------------------------------------------------------------------------------------------
CARpoly_onset_cutoffs = quantile(CARpoly_tidy$onset, c(0,1/3,2/3,1), na.rm = TRUE)
library(ggplot2)
library(tidyverse)
library(dplyr)
source('E:/R-code/Modeling/code/FCN_clean_csvs.R')
median_cell_raw <- read.csv('E:/R-code/Modeling/data/median_onset_cell_v2.csv')
percentile5_cell_raw <- read.csv('E:/R-code/Modeling/data/percentile5_onset_cell_v2.csv')
percentile95_cell_raw <- read.csv('E:/R-code/Modeling/data/percentile95_onset_cell_v2.csv')
median_muni_raw <- read.csv('E:/R-code/Modeling/data/median_muni_v2.csv')
percentile5_muni_raw <- read.csv('E:/R-code/Modeling/data/percentile5_muni_v2.csv')
percentile95_muni_raw <- read.csv('E:/R-code/Modeling/data/percentile95_muni_v2.csv')
median_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/median_CARpoly_v2.csv')
percentile5_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/percentile5_CARpoly_v2.csv')
percentile95_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/percentile95_CARpoly_v2.csv')
min_soy_area <- 2 #km2. min area of total or SC/DC soy in cell, muni or property to be considered in model
# median cell
median_cell <- median_cell_raw %>% delete_cols_median_cell() %>%
rename_cols_median_cell()
percentile5_cell <- percentile5_cell_raw %>% filter(year > 0)
percentile95_cell <- percentile95_cell_raw %>% filter(year > 0)
# median muni
median_muni <- median_muni_raw %>% rename_cols_median_muni()
percentile5_muni <- percentile5_muni_raw %>% filter(year > 0)
percentile95_muni <- percentile95_muni_raw %>% filter(year > 0)
# median CARpoly
median_CARpoly <- median_CARpoly_raw %>% rename_cols_median_CARpoly
percentile5_CARpoly <- percentile5_CARpoly_raw %>% filter(year > 0)
percentile95_CARpoly <- percentile95_CARpoly_raw %>% filter(year > 0)
# CELL SCALE ------------------------------------------------------------------------------------------------
# tidy version
cell_onset_cutoffs = quantile(cell_tidy$onset, c(0,1/3,2/3,1), na.rm = TRUE)
#  CELL ------------------------------------------------------------------------------------------------
median_cell_plant <- median_cell %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
median_cell_delay <- median_cell %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
percentile5_cell_plant <- percentile5_cell %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
percentile5_cell_delay <- percentile5_cell %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
percentile95_cell_plant <- percentile95_cell %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
percentile95_cell_delay <- percentile95_cell %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
# combine together
cell_tidy <- combine_variables_cell(median_cell_plant, median_cell_delay,
percentile5_cell_plant, percentile5_cell_delay,
percentile95_cell_plant, percentile95_cell_delay)
# MUNI ------------------------------------------------------------------------------------------------
median_muni_plant <- median_muni %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
median_muni_delay <- median_muni %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
percentile5_muni_plant <- percentile5_muni %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
percentile5_muni_delay <- percentile5_muni %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
percentile95_muni_plant <- percentile95_muni %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
percentile95_muni_delay <- percentile95_muni %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
# combine together
muni_tidy <- combine_variables_muni(median_muni_plant, median_muni_delay,
percentile5_muni_plant, percentile5_muni_delay,
percentile95_muni_plant, percentile95_muni_delay)
# MEDIAN CARpoly ------------------------------------------------------------------------------------------------
median_CARpoly_plant <- median_CARpoly %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
median_CARpoly_delay <- median_CARpoly %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
percentile5_CARpoly_plant <- percentile5_CARpoly %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
percentile5_CARpoly_delay <- percentile5_CARpoly %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
percentile95_CARpoly_plant <- percentile95_CARpoly %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
percentile95_CARpoly_delay <- percentile95_CARpoly %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
# combine together
CARpoly_tidy <- combine_variables_CARpoly(median_CARpoly_plant, median_CARpoly_delay,
percentile5_CARpoly_plant, percentile5_CARpoly_delay,
percentile95_CARpoly_plant, percentile95_CARpoly_delay)
# CELL SCALE ------------------------------------------------------------------------------------------------
# tidy version
cell_onset_cutoffs = quantile(cell_tidy$onset, c(0,1/3,2/3,1), na.rm = TRUE)
cell_onset_cutoffs[1] = cell_onset_cutoffs[1]-1
cell_lat_cutoffs = quantile(cell_tidy$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
cell_lat_cutoffs[1] = cell_lat_cutoffs[1]-1
cell_delay_cutoffs = quantile(cell_tidy$delay_median, c(0,1/3,2/3,1), na.rm = TRUE)
cell_delay_cutoffs[1] = cell_delay_cutoffs[1]-1
cell_tidy <- cell_tidy %>% mutate(onset_category=cut(onset, breaks = cell_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = cell_lat_cutoffs,
labels=c("south","central","north"))) %>%
mutate(delay_category=cut(delay_median, breaks = cell_delay_cutoffs,
labels=c("short_delay","middle_delay","long_delay")))
# untidy version (to compare SC and DC easily)
cell_onset_cutoffs = quantile(median_cell$onset, c(0,1/3,2/3,1), na.rm = TRUE)
cell_onset_cutoffs[1] = cell_onset_cutoffs[1]-1
cell_lat_cutoffs = quantile(median_cell$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
cell_lat_cutoffs[1] = cell_lat_cutoffs[1]-1
median_cell <- median_cell %>% mutate(onset_category=cut(onset, breaks = cell_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = cell_lat_cutoffs,
labels=c("south","central","north")))
# Muni SCALE ------------------------------------------------------------------------------------------------
muni_onset_cutoffs = quantile(muni_tidy$onset, c(0,1/3,2/3,1), na.rm = TRUE)
muni_onset_cutoffs[1] = muni_onset_cutoffs[1]-1
muni_lat_cutoffs = quantile(muni_tidy$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
muni_lat_cutoffs[1] = muni_lat_cutoffs[1]-1
muni_delay_cutoffs = quantile(muni_tidy$delay_median, c(0,1/3,2/3,1), na.rm = TRUE)
muni_delay_cutoffs[1] = muni_delay_cutoffs[1]-1
muni_tidy <- muni_tidy %>% mutate(onset_category=cut(onset, breaks = muni_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = muni_lat_cutoffs,
labels=c("south","central","north"))) %>%
mutate(delay_category=cut(delay_median, breaks = muni_delay_cutoffs,
labels=c("short_delay","middle_delay","long_delay")))
# untidy version (to compare SC and DC easily)
muni_onset_cutoffs = quantile(median_muni$onset, c(0,1/3,2/3,1), na.rm = TRUE)
muni_onset_cutoffs[1] = muni_onset_cutoffs[1]-1
muni_lat_cutoffs = quantile(median_muni$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
muni_lat_cutoffs[1] = muni_lat_cutoffs[1]-1
median_muni <- median_muni %>% mutate(onset_category=cut(onset, breaks = muni_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = muni_lat_cutoffs,
labels=c("south","central","north")))
# CARpoly SCALE ------------------------------------------------------------------------------------------------
CARpoly_onset_cutoffs = quantile(CARpoly_tidy$onset, c(0,1/3,2/3,1), na.rm = TRUE)
CARpoly_onset_cutoffs[1] = CARpoly_onset_cutoffs[1]-1
CARpoly_lat_cutoffs = quantile(CARpoly_tidy$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
CARpoly_lat_cutoffs[1] = CARpoly_lat_cutoffs[1]-1
CARpoly_delay_cutoffs = quantile(CARpoly_tidy$delay_median, c(0,1/3,2/3,1), na.rm = TRUE)
CARpoly_delay_cutoffs[1] = CARpoly_delay_cutoffs[1]-1
CARpoly_area_cutoffs = quantile(CARpoly_tidy$poly_area_km2, c(0,1/3,2/3,1), na.rm = TRUE)
CARpoly_area_cutoffs[1] = CARpoly_area_cutoffs[1]-1
CARpoly_tidy <- CARpoly_tidy %>% mutate(onset_category=cut(onset, breaks = CARpoly_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = CARpoly_lat_cutoffs,
labels=c("south","central","north"))) %>%
mutate(delay_category=cut(delay_median, breaks = CARpoly_delay_cutoffs,
labels=c("short_delay","middle_delay","long_delay"))) %>%
mutate(area_category=cut(poly_area_km2, breaks = CARpoly_area_cutoffs,
labels=c("small_property","middle_property","large_property")))
# untidy version (to compare SC and DC easily)
CARpoly_onset_cutoffs = quantile(median_CARpoly$onset, c(0,1/3,2/3,1), na.rm = TRUE)
CARpoly_onset_cutoffs[1] = CARpoly_onset_cutoffs[1]-1
CARpoly_lat_cutoffs = quantile(median_CARpoly$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
CARpoly_lat_cutoffs[1] = CARpoly_lat_cutoffs[1]-1
CARpoly_area_cutoffs = quantile(median_CARpoly$poly_area_km2, c(0,1/3,2/3,1), na.rm = TRUE)
CARpoly_area_cutoffs[1] = CARpoly_area_cutoffs[1]-1
median_CARpoly <- median_CARpoly %>% mutate(onset_category=cut(onset, breaks = CARpoly_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = CARpoly_lat_cutoffs,
labels=c("south","central","north"))) %>%
mutate(area_category=cut(poly_area_km2, breaks = CARpoly_area_cutoffs,
labels=c("small_property","middle_property","large_property")))
library(ggplot2)
library(tidyverse)
library(dplyr)
source('E:/R-code/Modeling/code/FCN_clean_csvs.R')
median_cell_raw <- read.csv('E:/R-code/Modeling/data/median_onset_cell_v2.csv')
percentile5_cell_raw <- read.csv('E:/R-code/Modeling/data/percentile5_onset_cell_v2.csv')
percentile95_cell_raw <- read.csv('E:/R-code/Modeling/data/percentile95_onset_cell_v2.csv')
median_muni_raw <- read.csv('E:/R-code/Modeling/data/median_muni_v2.csv')
percentile5_muni_raw <- read.csv('E:/R-code/Modeling/data/percentile5_muni_v2.csv')
percentile95_muni_raw <- read.csv('E:/R-code/Modeling/data/percentile95_muni_v2.csv')
median_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/median_CARpoly_v2.csv')
percentile5_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/percentile5_CARpoly_v2.csv')
percentile95_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/percentile95_CARpoly_v2.csv')
# median cell
median_cell <- median_cell_raw %>% delete_cols_median_cell() %>%
rename_cols_median_cell()
percentile5_cell <- percentile5_cell_raw %>% filter(year > 0)
percentile95_cell <- percentile95_cell_raw %>% filter(year > 0)
# median muni
median_muni <- median_muni_raw %>% rename_cols_median_muni()
percentile5_muni <- percentile5_muni_raw %>% filter(year > 0)
percentile95_muni <- percentile95_muni_raw %>% filter(year > 0)
# median CARpoly
median_CARpoly <- median_CARpoly_raw %>% rename_cols_median_CARpoly
percentile5_CARpoly <- percentile5_CARpoly_raw %>% filter(year > 0)
percentile95_CARpoly <- percentile95_CARpoly_raw %>% filter(year > 0)
#  CELL ------------------------------------------------------------------------------------------------
tidy_combine_cell <- function(median_cell, percentile5_cell, percentile95_cell) {
median_cell_plant <- median_cell %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
median_cell_delay <- median_cell %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
percentile5_cell_plant <- percentile5_cell %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
percentile5_cell_delay <- percentile5_cell %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
percentile95_cell_plant <- percentile95_cell %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
percentile95_cell_delay <- percentile95_cell %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
# combine together
cell_tidy <- combine_variables_cell(median_cell_plant, median_cell_delay,
percentile5_cell_plant, percentile5_cell_delay,
percentile95_cell_plant, percentile95_cell_delay)
return(cell_tidy)
}
cell_tidy <- tidy_combine_cell(median_cell, percentile5_cell, percentile95_cell)
# MUNI ------------------------------------------------------------------------------------------------
median_muni_plant <- median_muni %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
median_muni_delay <- median_muni %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
percentile5_muni_plant <- percentile5_muni %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
percentile5_muni_delay <- percentile5_muni %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
percentile95_muni_plant <- percentile95_muni %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
percentile95_muni_delay <- percentile95_muni %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
# combine together
muni_tidy <- combine_variables_muni(median_muni_plant, median_muni_delay,
percentile5_muni_plant, percentile5_muni_delay,
percentile95_muni_plant, percentile95_muni_delay)
# MEDIAN CARpoly ------------------------------------------------------------------------------------------------
median_CARpoly_plant <- median_CARpoly %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
median_CARpoly_delay <- median_CARpoly %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
percentile5_CARpoly_plant <- percentile5_CARpoly %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
percentile5_CARpoly_delay <- percentile5_CARpoly %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
percentile95_CARpoly_plant <- percentile95_CARpoly %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
percentile95_CARpoly_delay <- percentile95_CARpoly %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
# combine together
CARpoly_tidy <- combine_variables_CARpoly(median_CARpoly_plant, median_CARpoly_delay,
percentile5_CARpoly_plant, percentile5_CARpoly_delay,
percentile95_CARpoly_plant, percentile95_CARpoly_delay)
library(ggplot2)
library(tidyverse)
library(dplyr)
source('E:/R-code/Modeling/code/FCN_clean_csvs.R')
median_cell_raw <- read.csv('E:/R-code/Modeling/data/median_onset_cell_v2.csv')
percentile5_cell_raw <- read.csv('E:/R-code/Modeling/data/percentile5_onset_cell_v2.csv')
percentile95_cell_raw <- read.csv('E:/R-code/Modeling/data/percentile95_onset_cell_v2.csv')
median_muni_raw <- read.csv('E:/R-code/Modeling/data/median_muni_v2.csv')
percentile5_muni_raw <- read.csv('E:/R-code/Modeling/data/percentile5_muni_v2.csv')
percentile95_muni_raw <- read.csv('E:/R-code/Modeling/data/percentile95_muni_v2.csv')
median_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/median_CARpoly_v2.csv')
percentile5_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/percentile5_CARpoly_v2.csv')
percentile95_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/percentile95_CARpoly_v2.csv')
# median cell
median_cell <- median_cell_raw %>% delete_cols_median_cell() %>%
rename_cols_median_cell()
percentile5_cell <- percentile5_cell_raw %>% filter(year > 0)
percentile95_cell <- percentile95_cell_raw %>% filter(year > 0)
# median muni
median_muni <- median_muni_raw %>% rename_cols_median_muni()
percentile5_muni <- percentile5_muni_raw %>% filter(year > 0)
percentile95_muni <- percentile95_muni_raw %>% filter(year > 0)
# median CARpoly
median_CARpoly <- median_CARpoly_raw %>% rename_cols_median_CARpoly
percentile5_CARpoly <- percentile5_CARpoly_raw %>% filter(year > 0)
percentile95_CARpoly <- percentile95_CARpoly_raw %>% filter(year > 0)
#  CELL ------------------------------------------------------------------------------------------------
cell_tidy <- tidy_combine_cell(median_cell, percentile5_cell, percentile95_cell)
# MUNI ------------------------------------------------------------------------------------------------
muni_tidy <- tidy_combine_muni(median_muni, percentile5_muni, percentile95_muni)
# MEDIAN CARpoly ------------------------------------------------------------------------------------------------
median_CARpoly_plant <- median_CARpoly %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
median_CARpoly_delay <- median_CARpoly %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
percentile5_CARpoly_plant <- percentile5_CARpoly %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
percentile5_CARpoly_delay <- percentile5_CARpoly %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
percentile95_CARpoly_plant <- percentile95_CARpoly %>% tidy_by_intensity_plant("single_plant", "double_plant") %>%
select(-c(single_delay, double_delay, single_harvest, double_harvest))
percentile95_CARpoly_delay <- percentile95_CARpoly %>% tidy_by_intensity_delay("single_delay", "double_delay") %>%
select(-c(single_plant, double_plant, single_harvest, double_harvest))
# combine together
CARpoly_tidy <- combine_variables_CARpoly(median_CARpoly_plant, median_CARpoly_delay,
percentile5_CARpoly_plant, percentile5_CARpoly_delay,
percentile95_CARpoly_plant, percentile95_CARpoly_delay)
# CELL SCALE ------------------------------------------------------------------------------------------------
# tidy version
cell_onset_cutoffs = quantile(cell_tidy$onset, c(0,1/3,2/3,1), na.rm = TRUE)
cell_onset_cutoffs[1] = cell_onset_cutoffs[1]-1
cell_lat_cutoffs = quantile(cell_tidy$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
cell_lat_cutoffs[1] = cell_lat_cutoffs[1]-1
cell_delay_cutoffs = quantile(cell_tidy$delay_median, c(0,1/3,2/3,1), na.rm = TRUE)
cell_delay_cutoffs[1] = cell_delay_cutoffs[1]-1
cell_tidy <- cell_tidy %>% mutate(onset_category=cut(onset, breaks = cell_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = cell_lat_cutoffs,
labels=c("south","central","north"))) %>%
mutate(delay_category=cut(delay_median, breaks = cell_delay_cutoffs,
labels=c("short_delay","middle_delay","long_delay")))
# untidy version (to compare SC and DC easily)
cell_onset_cutoffs = quantile(median_cell$onset, c(0,1/3,2/3,1), na.rm = TRUE)
cell_onset_cutoffs[1] = cell_onset_cutoffs[1]-1
cell_lat_cutoffs = quantile(median_cell$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
cell_lat_cutoffs[1] = cell_lat_cutoffs[1]-1
median_cell <- median_cell %>% mutate(onset_category=cut(onset, breaks = cell_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = cell_lat_cutoffs,
labels=c("south","central","north")))
# Muni SCALE ------------------------------------------------------------------------------------------------
muni_onset_cutoffs = quantile(muni_tidy$onset, c(0,1/3,2/3,1), na.rm = TRUE)
muni_onset_cutoffs[1] = muni_onset_cutoffs[1]-1
muni_lat_cutoffs = quantile(muni_tidy$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
muni_lat_cutoffs[1] = muni_lat_cutoffs[1]-1
muni_delay_cutoffs = quantile(muni_tidy$delay_median, c(0,1/3,2/3,1), na.rm = TRUE)
muni_delay_cutoffs[1] = muni_delay_cutoffs[1]-1
muni_tidy <- muni_tidy %>% mutate(onset_category=cut(onset, breaks = muni_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = muni_lat_cutoffs,
labels=c("south","central","north"))) %>%
mutate(delay_category=cut(delay_median, breaks = muni_delay_cutoffs,
labels=c("short_delay","middle_delay","long_delay")))
# untidy version (to compare SC and DC easily)
muni_onset_cutoffs = quantile(median_muni$onset, c(0,1/3,2/3,1), na.rm = TRUE)
muni_onset_cutoffs[1] = muni_onset_cutoffs[1]-1
muni_lat_cutoffs = quantile(median_muni$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
muni_lat_cutoffs[1] = muni_lat_cutoffs[1]-1
median_muni <- median_muni %>% mutate(onset_category=cut(onset, breaks = muni_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = muni_lat_cutoffs,
labels=c("south","central","north")))
# CARpoly SCALE ------------------------------------------------------------------------------------------------
CARpoly_onset_cutoffs = quantile(CARpoly_tidy$onset, c(0,1/3,2/3,1), na.rm = TRUE)
CARpoly_onset_cutoffs[1] = CARpoly_onset_cutoffs[1]-1
CARpoly_lat_cutoffs = quantile(CARpoly_tidy$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
CARpoly_lat_cutoffs[1] = CARpoly_lat_cutoffs[1]-1
CARpoly_delay_cutoffs = quantile(CARpoly_tidy$delay_median, c(0,1/3,2/3,1), na.rm = TRUE)
CARpoly_delay_cutoffs[1] = CARpoly_delay_cutoffs[1]-1
CARpoly_area_cutoffs = quantile(CARpoly_tidy$poly_area_km2, c(0,1/3,2/3,1), na.rm = TRUE)
CARpoly_area_cutoffs[1] = CARpoly_area_cutoffs[1]-1
CARpoly_tidy <- CARpoly_tidy %>% mutate(onset_category=cut(onset, breaks = CARpoly_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = CARpoly_lat_cutoffs,
labels=c("south","central","north"))) %>%
mutate(delay_category=cut(delay_median, breaks = CARpoly_delay_cutoffs,
labels=c("short_delay","middle_delay","long_delay"))) %>%
mutate(area_category=cut(poly_area_km2, breaks = CARpoly_area_cutoffs,
labels=c("small_property","middle_property","large_property")))
# untidy version (to compare SC and DC easily)
CARpoly_onset_cutoffs = quantile(median_CARpoly$onset, c(0,1/3,2/3,1), na.rm = TRUE)
CARpoly_onset_cutoffs[1] = CARpoly_onset_cutoffs[1]-1
CARpoly_lat_cutoffs = quantile(median_CARpoly$latitude, c(0,1/3,2/3,1), na.rm = TRUE)
CARpoly_lat_cutoffs[1] = CARpoly_lat_cutoffs[1]-1
CARpoly_area_cutoffs = quantile(median_CARpoly$poly_area_km2, c(0,1/3,2/3,1), na.rm = TRUE)
CARpoly_area_cutoffs[1] = CARpoly_area_cutoffs[1]-1
median_CARpoly <- median_CARpoly %>% mutate(onset_category=cut(onset, breaks = CARpoly_onset_cutoffs,
labels=c("early_onset","middle_onset","late_onset"))) %>%
mutate(lat_category=cut(latitude, breaks = CARpoly_lat_cutoffs,
labels=c("south","central","north"))) %>%
mutate(area_category=cut(poly_area_km2, breaks = CARpoly_area_cutoffs,
labels=c("small_property","middle_property","large_property")))
library(ggplot2)
library(tidyverse)
library(dplyr)
source('E:/R-code/Modeling/code/FCN_clean_csvs.R')
median_cell_raw <- read.csv('E:/R-code/Modeling/data/median_onset_cell_v2.csv')
percentile5_cell_raw <- read.csv('E:/R-code/Modeling/data/percentile5_onset_cell_v2.csv')
percentile95_cell_raw <- read.csv('E:/R-code/Modeling/data/percentile95_onset_cell_v2.csv')
median_muni_raw <- read.csv('E:/R-code/Modeling/data/median_muni_v2.csv')
percentile5_muni_raw <- read.csv('E:/R-code/Modeling/data/percentile5_muni_v2.csv')
percentile95_muni_raw <- read.csv('E:/R-code/Modeling/data/percentile95_muni_v2.csv')
median_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/median_CARpoly_v2.csv')
percentile5_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/percentile5_CARpoly_v2.csv')
percentile95_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/percentile95_CARpoly_v2.csv')
# median cell
median_cell <- median_cell_raw %>% delete_cols_median_cell() %>%
rename_cols_median_cell()
percentile5_cell <- percentile5_cell_raw %>% filter(year > 0)
percentile95_cell <- percentile95_cell_raw %>% filter(year > 0)
# median muni
median_muni <- median_muni_raw %>% rename_cols_median_muni()
percentile5_muni <- percentile5_muni_raw %>% filter(year > 0)
percentile95_muni <- percentile95_muni_raw %>% filter(year > 0)
# median CARpoly
median_CARpoly <- median_CARpoly_raw %>% rename_cols_median_CARpoly
percentile5_CARpoly <- percentile5_CARpoly_raw %>% filter(year > 0)
percentile95_CARpoly <- percentile95_CARpoly_raw %>% filter(year > 0)
# create tidy datasets
cell_tidy <- tidy_combine_cell(median_cell, percentile5_cell, percentile95_cell)
muni_tidy <- tidy_combine_muni(median_muni, percentile5_muni, percentile95_muni)
CARpoly_tidy <- tidy_combine_CARpoly(median_CARpoly, percentile5_CARpoly, percentile95_CARpoly)
# categorize numeric variables
cell_tidy <- categorize_vars_cell_tidy(cell_tidy)
library(ggplot2)
library(tidyverse)
library(dplyr)
source('E:/R-code/Modeling/code/FCN_clean_csvs.R')
median_cell_raw <- read.csv('E:/R-code/Modeling/data/median_onset_cell_v2.csv')
percentile5_cell_raw <- read.csv('E:/R-code/Modeling/data/percentile5_onset_cell_v2.csv')
percentile95_cell_raw <- read.csv('E:/R-code/Modeling/data/percentile95_onset_cell_v2.csv')
median_muni_raw <- read.csv('E:/R-code/Modeling/data/median_muni_v2.csv')
percentile5_muni_raw <- read.csv('E:/R-code/Modeling/data/percentile5_muni_v2.csv')
percentile95_muni_raw <- read.csv('E:/R-code/Modeling/data/percentile95_muni_v2.csv')
median_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/median_CARpoly_v2.csv')
percentile5_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/percentile5_CARpoly_v2.csv')
percentile95_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/percentile95_CARpoly_v2.csv')
# median cell
median_cell <- median_cell_raw %>% delete_cols_median_cell() %>%
rename_cols_median_cell()
percentile5_cell <- percentile5_cell_raw %>% filter(year > 0)
percentile95_cell <- percentile95_cell_raw %>% filter(year > 0)
# median muni
median_muni <- median_muni_raw %>% rename_cols_median_muni()
percentile5_muni <- percentile5_muni_raw %>% filter(year > 0)
percentile95_muni <- percentile95_muni_raw %>% filter(year > 0)
# median CARpoly
median_CARpoly <- median_CARpoly_raw %>% rename_cols_median_CARpoly
percentile5_CARpoly <- percentile5_CARpoly_raw %>% filter(year > 0)
percentile95_CARpoly <- percentile95_CARpoly_raw %>% filter(year > 0)
# create tidy datasets
cell_tidy <- tidy_combine_cell(median_cell, percentile5_cell, percentile95_cell)
muni_tidy <- tidy_combine_muni(median_muni, percentile5_muni, percentile95_muni)
CARpoly_tidy <- tidy_combine_CARpoly(median_CARpoly, percentile5_CARpoly, percentile95_CARpoly)
# categorize numeric variables
cell_tidy <- categorize_vars_cell_tidy(cell_tidy)
cell_untidy <- categorize_vars_cell_untidy(median_cell) # untidy version (to compare SC and DC easily)
View(median_cell)
View(cell_tidy)
View(cell_untidy)
library(ggplot2)
library(tidyverse)
library(dplyr)
source('E:/R-code/Modeling/code/FCN_clean_csvs.R')
median_cell_raw <- read.csv('E:/R-code/Modeling/data/median_onset_cell_v2.csv')
percentile5_cell_raw <- read.csv('E:/R-code/Modeling/data/percentile5_onset_cell_v2.csv')
percentile95_cell_raw <- read.csv('E:/R-code/Modeling/data/percentile95_onset_cell_v2.csv')
median_muni_raw <- read.csv('E:/R-code/Modeling/data/median_muni_v2.csv')
percentile5_muni_raw <- read.csv('E:/R-code/Modeling/data/percentile5_muni_v2.csv')
percentile95_muni_raw <- read.csv('E:/R-code/Modeling/data/percentile95_muni_v2.csv')
median_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/median_CARpoly_v2.csv')
percentile5_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/percentile5_CARpoly_v2.csv')
percentile95_CARpoly_raw <- read.csv('E:/R-code/Modeling/data/percentile95_CARpoly_v2.csv')
# median cell
median_cell <- median_cell_raw %>% delete_cols_median_cell() %>%
rename_cols_median_cell()
percentile5_cell <- percentile5_cell_raw %>% filter(year > 0)
percentile95_cell <- percentile95_cell_raw %>% filter(year > 0)
# median muni
median_muni <- median_muni_raw %>% rename_cols_median_muni()
percentile5_muni <- percentile5_muni_raw %>% filter(year > 0)
percentile95_muni <- percentile95_muni_raw %>% filter(year > 0)
# median CARpoly
median_CARpoly <- median_CARpoly_raw %>% rename_cols_median_CARpoly
percentile5_CARpoly <- percentile5_CARpoly_raw %>% filter(year > 0)
percentile95_CARpoly <- percentile95_CARpoly_raw %>% filter(year > 0)
# create tidy datasets
cell_tidy <- tidy_combine_cell(median_cell, percentile5_cell, percentile95_cell)
muni_tidy <- tidy_combine_muni(median_muni, percentile5_muni, percentile95_muni)
CARpoly_tidy <- tidy_combine_CARpoly(median_CARpoly, percentile5_CARpoly, percentile95_CARpoly)
# categorize numeric variables
cell_tidy <- categorize_vars_cell_tidy(cell_tidy)
cell_untidy <- categorize_vars_cell_untidy(median_cell) # untidy version (to compare SC and DC easily)
muni_tidy <- categorize_vars_muni_tidy(muni_tidy)
muni_untidy <- categorize_vars_muni_untidy(median_muni)
CARpoly_tidy <- categorize_vars_CARpoly_tidy(CARpoly_tidy)
CARpoly_untidy <- categorize_vars_CARpoly_untidy(median_CARpoly)
View(CARpoly_tidy)
View(muni_tidy)
